<!-- Loading State -->
@if (isLoading()) {
<div class="flex items-center justify-center py-20">
  <div class="text-center">
    <div class="spinner mx-auto mb-6"></div>
    <p class="text-gray-500">Loading teams...</p>
  </div>
</div>
}

<!-- Teams View -->
@if (!isLoading()) {
<div class="space-y-6 animate-fade-in">
  <!-- Header -->
  <div class="card p-8">
    <div class="flex items-center justify-between mb-6">
      <div>
        <h1 class="page-title flex items-center gap-3">
          <div class="icon-circle">
            <i class="fas fa-users text-xl"></i>
          </div>
          Teams
        </h1>
        <p class="page-subtitle">
          Manage teams for this tournament
        </p>
      </div>

      <!-- Add Team Button -->
      <button type="button" (click)="onAddTeam()" class="btn-primary">
        <i class="fas fa-plus mr-2"></i> Add Team
      </button>
    </div>

    <!-- Team Count -->
    <div class="pt-6 border-t border-gray-200">
      <div class="flex items-center gap-2">
        <span class="text-3xl font-bold text-gray-900">{{ teams().length }}</span>
        <span class="text-gray-500">team(s) registered</span>
      </div>
    </div>
  </div>

  <!-- Team Form (inline create/edit) -->
  @if (showForm()) {
  <div class="card p-8 animate-slide-in">
    <h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center gap-3">
      <div class="w-10 h-10 rounded-xl flex items-center justify-center bg-gray-900">
        <i class="fas text-white" [class.fa-plus]="!editingTeam()" [class.fa-edit]="editingTeam()"></i>
      </div>
      {{ editingTeam() ? 'Edit Team' : 'Add New Team' }}
    </h2>
    <app-team-form [team]="editingTeam()" (save)="onSaveTeam($event)" (cancel)="onCancelForm()" />
  </div>
  }

  <!-- Teams List -->
  @if (teams().length > 0 && !showForm()) {
  <div class="card overflow-hidden">
    <table class="w-full">
      <thead>
        <tr>
          <th class="table-header text-left">#</th>
          <th class="table-header text-left">Team</th>
          <th class="table-header text-left">Coach</th>
        </tr>
      </thead>
      <tbody>
        @for (team of teams(); track team.id; let idx = $index) {
          <tr class="table-row cursor-pointer" (click)="openTeamDetails(team)">
            <td class="table-cell font-medium text-gray-500 w-12">{{ idx + 1 }}</td>
            <td class="table-cell font-semibold text-gray-900">{{ team.name }}</td>
            <td class="table-cell text-gray-600">{{ team.coach }}</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  }

  <!-- Team Details Modal -->
  <app-team-details-modal
    [team]="selectedTeamForModal()"
    (close)="closeTeamDetails()"
    (edit)="editFromModal($event)"
    (delete)="deleteFromModal($event)"
    (viewPlayers)="viewPlayersFromModal($event)"
  />

  <!-- Empty State -->
  @if (teams().length === 0 && !showForm()) {
  <div class="card p-16">
    <div class="empty-state">
      <i class="fas fa-users empty-state-icon"></i>
      <h2 class="empty-state-title">No Teams Yet</h2>
      <p class="empty-state-description">
        Start by adding the first team to this tournament.
      </p>
      <button type="button" (click)="onAddTeam()" class="btn-primary">
        <i class="fas fa-plus mr-2"></i> Add First Team
      </button>
    </div>
  </div>
  }
</div>
}
