<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-8">
  <div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold text-gray-800">Partidos</h1>
      <button
        (click)="onCreateMatch()"
        class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-200 transform hover:-translate-y-1"
      >
        <i class="fas fa-plus-circle mr-2"></i>
        Crear Partido
      </button>
    </div>

    <!-- Filters -->
    <app-match-filters
      (filterChange)="onFilterChange($event)"
    />

    <!-- Form Modal -->
    @if (showForm()) {
      <div
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
        (click)="closeForm()"
      >
        <div
          class="max-w-2xl w-full max-h-[90vh] overflow-y-auto"
          (click)="$event.stopPropagation()"
        >
          <app-match-form
            [match]="selectedMatch()"
            [teams]="teams()"
            [mode]="formMode()"
            (matchSubmit)="onMatchSubmit($event)"
            (resultSubmit)="onResultSubmit($event)"
            (cancel)="closeForm()"
          />
        </div>
      </div>
    }

    <!-- Details Modal -->
    @if (matchService.selectedMatch(); as selectedMatch) {
      <app-match-details-modal
        [match]="selectedMatch"
        [homeTeamName]="getTeamName(selectedMatch.homeTeamId)"
        [awayTeamName]="getTeamName(selectedMatch.awayTeamId)"
        (close)="closeDetails()"
        (edit)="onEditMatch($event)"
        (finish)="onFinishMatch($event)"
        (delete)="onDeleteMatch($event)"
        (postpone)="onPostponeMatch($event)"
      />
    }

    <!-- Loading State -->
    @if (isLoading()) {
      <div class="flex justify-center items-center py-20">
        <div class="text-center">
          <div
            class="w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"
          ></div>
          <p class="text-gray-600 font-semibold">Cargando partidos...</p>
        </div>
      </div>
    }

    <!-- Initial State - No search performed yet -->
    @else if (!hasSearched() && !isLoading()) {
      <div class="text-center py-20">
        <div class="mb-6">
          <i class="fas fa-filter text-gray-300 text-8xl"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-700 mb-2">
          Selecciona un filtro
        </h3>
        <p class="text-gray-500 mb-6">
          Utiliza los filtros para buscar partidos por estado, fecha espec√≠fica o rango de fechas.
        </p>
      </div>
    }

    <!-- Empty State - Search performed but no results -->
    @else if (matches().length === 0 && !isLoading() && hasSearched()) {
      <div class="text-center py-20">
        <div class="mb-6">
          <i class="fas fa-calendar-times text-gray-300 text-8xl"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-700 mb-2">
          No hay partidos
        </h3>
        <p class="text-gray-500 mb-6">
          No se encontraron partidos con los filtros seleccionados.
        </p>
      </div>
    }

    <!-- Matches List -->
    @else {
      <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-6">
        @for (match of matches(); track match.id) {
          <app-match-card
            [match]="match"
            [homeTeamName]="getTeamName(match.homeTeamId)"
            [awayTeamName]="getTeamName(match.awayTeamId)"
            (cardClick)="onMatchClick($event)"
            (editClick)="onEditMatch($event)"
            (deleteClick)="onDeleteMatch($event)"
            (finishClick)="onFinishMatch($event)"
            (postponeClick)="onPostponeMatch($event)"
          />
        }
      </div>

      <!-- Pagination -->
      <app-match-pagination
        [currentPage]="pagination().page"
        [totalPages]="pagination().totalPages"
        [totalElements]="pagination().totalElements"
        [hasNext]="pagination().hasNext"
        [hasPrevious]="pagination().hasPrevious"
        (pageChange)="onPageChange($event)"
      />
    }
  </div>
</div>
