<!-- Tournament Selector Section (only visible if expanded and tournaments exist) -->
@if (isOpen() && tournaments()().length > 0) {
  <div class="space-y-2">
    <div class="flex items-center justify-between">
      <span class="text-xs font-semibold text-gray-500 uppercase">Tournaments</span>
      <button
        type="button"
        (click)="createTournament.emit()"
        class="p-1 rounded hover:bg-blue-50 text-blue-600 transition-colors"
        title="Create new tournament"
      >
        <i class="fas fa-plus text-sm"></i>
      </button>
    </div>

    <!-- Dropdown -->
    <select
      (change)="selectTournament.emit($event)"
      class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"
    >
      <option value="">Select a tournament...</option>
      @for (tournament of tournaments()(); track tournament.id) {
        <option [value]="tournament.id">
          {{ tournament.name }}
        </option>
      }
    </select>
  </div>

  <div class="border-t border-gray-200"></div>
}

<!-- Create button when sidebar is collapsed or no tournaments -->
@if (!isOpen() || tournaments()().length === 0) {
  <button
    type="button"
    (click)="createTournament.emit()"
    class="w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors hover:bg-blue-50 text-blue-600 group"
    [class.justify-center]="!isOpen()"
    [class.justify-start]="isOpen()"
    title="Create new tournament"
  >
    <i class="fas fa-plus text-xl"></i>
    @if (isOpen()) {
      <span class="font-medium">New Tournament</span>
    }
  </button>

  @if (isOpen() && tournaments()().length === 0 && !isLoading()()) {
    <p class="text-xs text-gray-500 px-4">No tournaments yet. Create your first one!</p>
  }

  @if (isOpen() && tournaments()().length === 0) {
    <div class="border-t border-gray-200"></div>
  }
}

<!-- Loading indicator -->
@if (isOpen() && isLoading()()) {
  <div class="flex items-center justify-center py-4">
    <i class="fas fa-spinner fa-spin text-blue-600"></i>
    <span class="ml-2 text-sm text-gray-600">Loading tournaments...</span>
  </div>
}
